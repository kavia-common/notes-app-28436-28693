{"is_source_file": true, "format": "Python", "description": "This file defines API endpoints for managing notes within a web application, including creating, retrieving, updating, deleting, summarizing notes, and fetching summaries. It uses FastAPI for routing, SQLAlchemy for database interactions, and incorporates security dependencies for user authentication.", "external_files": ["app.core.security", "app.db.session", "app.models.note", "app.models.summary", "app.schemas.note", "app.schemas.summary", "app.services.summarization_client"], "external_methods": ["get_current_user", "get_preview_or_current_user", "get_session", "Note.model_validate", "SummaryRead.model_validate", "SummarizationClient.summarize"], "published": ["list_notes", "create_note", "get_note", "update_note", "delete_note", "get_note_summary", "summarize_note"], "classes": [], "methods": [{"name": "List[NoteRead] list_notes( session: AsyncSession = Depends(get_session), user=Depends(get_preview_or_current_user), )", "description": "Handles GET requests to list all notes for the authenticated user, returning a list of NoteRead objects.", "scope": "", "scopeKind": ""}, {"name": "NoteRead create_note( payload: NoteCreate, session: AsyncSession = Depends(get_session), user=Depends(get_preview_or_current_user), )", "description": "Handles POST requests to create a new note with provided title and content, returning the created NoteRead object.", "scope": "", "scopeKind": ""}, {"name": "NoteRead get_note( id: int, session: AsyncSession = Depends(get_session), user=Depends(get_preview_or_current_user), )", "description": "Handles GET requests to retrieve a specific note by ID if owned by current user.", "scope": "", "scopeKind": ""}, {"name": "NoteRead update_note( id: int, payload: NoteUpdate, session: AsyncSession = Depends(get_session), user=Depends(get_preview_or_current_user), )", "description": "Handles PUT requests to update a note's title and content, returning the updated NoteRead object.", "scope": "", "scopeKind": ""}, {"name": "None delete_note( id: int, session: AsyncSession = Depends(get_session), user=Depends(get_preview_or_current_user), )", "description": "Handles DELETE requests to delete a note owned by the user with a 204 status code.", "scope": "", "scopeKind": ""}, {"name": "SummaryRead get_note_summary( id: int, session: AsyncSession = Depends(get_session), user=Depends(get_preview_or_current_user), )", "description": "Handles GET requests to fetch a stored summary for the specified note, ensuring note ownership.", "scope": "", "scopeKind": ""}, {"name": "dict summarize_note( id: int, session: AsyncSession = Depends(get_session), user=Depends(get_preview_or_current_user), )", "description": "Handles POST requests to trigger AI summarization of a note, storing the result and returning the summary text.", "scope": "", "scopeKind": ""}], "calls": ["session.execute", "session.add", "session.commit", "session.refresh", "session.delete", "Note.model_validate", "SummaryRead.model_validate", "SummarizationClient.summarize"], "search-terms": ["notes API", "note CRUD endpoints", "note summarization", "FastAPI notes", "Note database model", "Summarize note", "get_current_user"], "state": 2, "file_id": 7, "knowledge_revision": 62, "git_revision": "ce6636720be27aa04dedd08d8cd1a57d34dabf5b", "revision_history": [{"15": ""}, {"53": "ce6636720be27aa04dedd08d8cd1a57d34dabf5b"}, {"61": "ce6636720be27aa04dedd08d8cd1a57d34dabf5b"}, {"62": "ce6636720be27aa04dedd08d8cd1a57d34dabf5b"}], "ctags": [{"_type": "tag", "name": "create_note", "path": "/home/kavia/workspace/code-generation/notes-app-28436-28693/BackendAPIContainer/src/app/api/routes/notes.py", "pattern": "/^async def create_note($/", "language": "Python", "typeref": "typename:NoteRead", "kind": "function", "signature": "( payload: NoteCreate, session: AsyncSession = Depends(get_session), user=Depends(get_preview_or_current_user), )"}, {"_type": "tag", "name": "delete_note", "path": "/home/kavia/workspace/code-generation/notes-app-28436-28693/BackendAPIContainer/src/app/api/routes/notes.py", "pattern": "/^async def delete_note($/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "( id: int, session: AsyncSession = Depends(get_session), user=Depends(get_preview_or_current_user), )"}, {"_type": "tag", "name": "get_note", "path": "/home/kavia/workspace/code-generation/notes-app-28436-28693/BackendAPIContainer/src/app/api/routes/notes.py", "pattern": "/^async def get_note($/", "language": "Python", "typeref": "typename:NoteRead", "kind": "function", "signature": "( id: int, session: AsyncSession = Depends(get_session), user=Depends(get_preview_or_current_user), )"}, {"_type": "tag", "name": "get_note_summary", "path": "/home/kavia/workspace/code-generation/notes-app-28436-28693/BackendAPIContainer/src/app/api/routes/notes.py", "pattern": "/^async def get_note_summary($/", "language": "Python", "typeref": "typename:SummaryRead", "kind": "function", "signature": "( id: int, session: AsyncSession = Depends(get_session), user=Depends(get_preview_or_current_user), )"}, {"_type": "tag", "name": "list_notes", "path": "/home/kavia/workspace/code-generation/notes-app-28436-28693/BackendAPIContainer/src/app/api/routes/notes.py", "pattern": "/^async def list_notes($/", "language": "Python", "typeref": "typename:List[NoteRead]", "kind": "function", "signature": "( session: AsyncSession = Depends(get_session), user=Depends(get_preview_or_current_user), )"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/notes-app-28436-28693/BackendAPIContainer/src/app/api/routes/notes.py", "pattern": "/^router = APIRouter()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "summarize_note", "path": "/home/kavia/workspace/code-generation/notes-app-28436-28693/BackendAPIContainer/src/app/api/routes/notes.py", "pattern": "/^async def summarize_note($/", "language": "Python", "typeref": "typename:dict", "kind": "function", "signature": "( id: int, session: AsyncSession = Depends(get_session), user=Depends(get_preview_or_current_user), )"}, {"_type": "tag", "name": "update_note", "path": "/home/kavia/workspace/code-generation/notes-app-28436-28693/BackendAPIContainer/src/app/api/routes/notes.py", "pattern": "/^async def update_note($/", "language": "Python", "typeref": "typename:NoteRead", "kind": "function", "signature": "( id: int, payload: NoteUpdate, session: AsyncSession = Depends(get_session), user=Depends(get_preview_or_current_user), )"}], "hash": "f6b6c887b559c79bff6735355b669f1a", "format-version": 4, "code-base-name": "BackendAPIContainer", "filename": "BackendAPIContainer/src/app/api/routes/notes.py", "fields": [{"name": "router = APIRouter()", "scope": "", "scopeKind": "", "description": "unavailable"}]}